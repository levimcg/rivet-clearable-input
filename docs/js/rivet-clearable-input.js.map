{"version":3,"file":"rivet-clearable-input.js","sources":["../../src/js/rivet-clearable-input.js"],"sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], function () {\n      return factory(root);\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.ClearableInput = factory(root);\n  }\n})(typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : this, function (window) {\n\n  'use strict';\n\n  /**\n     * Creates a new custom event and stores a reference\n     * to the element's ID in the custom\n     * event's options \"detail\" property.\n     *\n     * More here:\n     * https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events#Adding_custom_data_%E2%80%93_CustomEvent()\n     *\n     */\n    var _fireCustomEvent = function(element, eventName) {\n      var event = new CustomEvent(eventName, { bubbles: true,\n        detail: {name: function() {\n             return element.id;\n        }}});\n\n      // Dispatch the event\n      element.dispatchEvent(event);\n    }\n\n    /**\n      * Check the provided element for the presence of the provided css class name\n      */\n    var _hasClass = function(element, classNameToFind) {\n        var classes = element.className.split(\" \");\n        var i = classes.indexOf(classNameToFind);\n        return (i >= 0);\n    }\n\n    /**\n      * Adds the classToToggle if not already present on the element if dataToCheck evaluates to true.\n      * Removes the classToToggle if present on the element if dataToCheck evaluates to false.\n      */\n    var _toggleClass = function(dataToCheck, element, classToToggle) {\n        var classes = element.className.split(\" \");\n        var i = classes.indexOf(classToToggle);\n        if (dataToCheck) {\n            //Add\n            if (i == -1) {\n                element.className += \" \" + classToToggle;\n            }\n        } else {\n            //Remove\n            if (i >= 0) {\n                classes.splice(i, 1);\n                element.className = classes.join(\" \");\n            }\n        }\n    }\n\n    /**\n      * Remove css classes from the element, clear the text, fire the event\n      */\n    var clearInput = function(element) {\n         _toggleClass(false, element, 'x');\n          _toggleClass(false, element, 'onX');\n          element.value = '';\n          _fireCustomEvent(element, 'inputCleared');\n    }\n\n    /**\n      * Adds all the event listeners to the input element(s)\n      */\n    var init = function() {\n      var objArray = document.querySelectorAll(\"input.rvt-clearable-input\");\n      for (var i=0; i<objArray.length; i++) {\n        var obj = objArray[i];\n          //Create handler event for when text is added to the input\n          obj.addEventListener('input', function(e) {\n               _toggleClass(e.target.value, e.target, 'x');\n          });\n\n          //Create handler event for when ESC key is pressed to clear the field\n          obj.addEventListener('keyup', function(e) {\n               if (e.keyCode == 27) {\n                   clearInput(e.target);\n               }\n          });\n\n          //Create handler event for moving the mouse over the X so that it can be clicked\n          obj.addEventListener('mousemove', function(e) {\n                if (_hasClass(e.target, 'x')) {\n                   var data = e.target.offsetWidth-28 < e.clientX-e.target.getBoundingClientRect().left;\n                   _toggleClass(data, e.target, 'onX');\n                }\n          });\n\n          //Create handler event for when the X is clicked to clear the field\n          obj.addEventListener('click', function(ev) {\n              if (_hasClass(ev.target, 'onX')) {\n                  ev.preventDefault();\n                 clearInput(ev.target);\n              }\n          });\n      }\n  }\n\n  /**\n   * Return public APIs\n   */\n  return {\n    init: init,\n    clearInput: clearInput\n  }\n});"],"names":["root","factory","define","amd","exports","module","ClearableInput","global","window","this","_fireCustomEvent","element","eventName","event","CustomEvent","bubbles","detail","name","id","dispatchEvent","_hasClass","classNameToFind","classes","className","split","i","indexOf","_toggleClass","dataToCheck","classToToggle","splice","join","clearInput","value","init","objArray","document","querySelectorAll","length","obj","addEventListener","e","target","keyCode","data","offsetWidth","clientX","getBoundingClientRect","left","ev","preventDefault"],"mappings":"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"}