{"version":3,"file":"rivet-clearable-input.js","sources":["../../src/js/rivet-clearable-input.js"],"sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], function () {\n      return factory(root);\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.ClearableInput = factory(root);\n  }\n})(typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : this, function (window) {\n\n  'use strict';\n\n  var CLEARABLE_ATTR = 'data-clearable';\n\n  var CLOSE_ICON = '<span class=\"rvt-sr-only\">Clear input</span>' +\n                   '<svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">' +\n                        '<g fill=\"currentColor\">' +\n                            '<path d=\"M8,0a8,8,0,1,0,8,8A8,8,0,0,0,8,0ZM8,14a6,6,0,1,1,6-6A6,6,0,0,1,8,14Z\"/>' +\n                            '<path d=\"M10.83,5.17a1,1,0,0,0-1.41,0L8,6.59,6.59,5.17A1,1,0,0,0,5.17,6.59L6.59,8,5.17,9.41a1,1,0,1,0,1.41,1.41L8,9.41l1.41,1.41a1,1,0,0,0,1.41-1.41L9.41,8l1.41-1.41A1,1,0,0,0,10.83,5.17Z\"/>' +\n                        '</g>' +\n                    '</svg>';\n\n  /**\n     * Creates a new custom event and stores a reference\n     * to the element's ID in the custom\n     * event's options \"detail\" property.\n     *\n     * More here:\n     * https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events#Adding_custom_data_%E2%80%93_CustomEvent()\n     *\n     */\n    var _fireCustomEvent = function(element, eventName) {\n      var event = new CustomEvent(eventName, { bubbles: true,\n        detail: {name: function() {\n             return element.id;\n        }}});\n\n      // Dispatch the event\n      element.dispatchEvent(event);\n    }\n\n    /**\n      * Remove css classes from the element, clear the text, hide the button, fire the event\n      */\n    var clearInput = function(element) {\n        element.classList.remove(\"hasData\");\n        element.value = '';\n        element.focus();\n\n        //Hide the button\n        var clearButton = createOrFindButton(element);\n        clearButton.style.display = \"none\";\n\n        _fireCustomEvent(element, 'inputCleared');\n    }\n\n    /**\n     * Event handler for the \"close\" button\n     */\n    var _handleClick = function(event) {\n        var clearButton = event.target;\n        if (clearButton.classList.contains(\"buttonX\")) {\n            var inputId = clearButton.getAttribute(CLEARABLE_ATTR);\n            clearInput(document.getElementById(inputId));\n        }\n\n    }\n\n    /**\n     * Event handler for input being entered into the text box\n     */\n    var _handleInput = function(event) {\n        var clearableInput = event.target;\n        if (clearableInput.classList.contains(\"rvt-clearable-input\")) {\n            var clearButton = createOrFindButton(clearableInput);\n            //If we have content, show the button, otherwise, hide it\n            if (clearableInput.value.length > 0) {\n                clearableInput.classList.add(\"hasData\");\n                clearButton.style.display = \"block\";\n            } else {\n                clearableInput.classList.remove(\"hasData\");\n                clearButton.style.display = \"none\";\n            }\n        }\n    }\n\n    /**\n     * Create a new button, or return the element if it already exists\n     */\n    var createOrFindButton = function(inputElement) {\n        var newButtonId = \"button_\" + inputElement.id;\n        //Make sure it doesn't exist already\n        var button = document.getElementById(newButtonId);\n\n        if (!button) {\n            button = document.createElement(\"button\");\n            button.type = \"button\";\n            button.setAttribute(CLEARABLE_ATTR, inputElement.id);\n            button.classList.add(\"buttonX\");\n            button.innerHTML = CLOSE_ICON;\n            button.id = newButtonId;\n            inputElement.parentNode.insertBefore(button, inputElement.nextSibling);\n        }\n        return button;\n    }\n\n    /**\n      * Adds all the event listeners to the input element(s)\n      */\n    var init = function(context) {\n        // Optional element to bind the event listeners to\n        if (context === undefined) {\n            context = document;\n        }\n\n        context.addEventListener('click', _handleClick, false);\n        context.addEventListener('input', _handleInput, false);\n  }\n\n  /**\n   * Return public APIs\n   */\n  return {\n    init: init,\n    clearInput: clearInput\n  }\n});"],"names":["root","factory","define","amd","exports","module","ClearableInput","global","window","this","CLEARABLE_ATTR","CLOSE_ICON","_fireCustomEvent","element","eventName","event","CustomEvent","bubbles","detail","name","id","dispatchEvent","clearInput","classList","remove","value","focus","clearButton","createOrFindButton","style","display","_handleClick","target","contains","inputId","getAttribute","document","getElementById","_handleInput","clearableInput","length","add","inputElement","newButtonId","button","createElement","type","setAttribute","innerHTML","parentNode","insertBefore","nextSibling","init","context","undefined","addEventListener"],"mappings":"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"}